% !Mode:: "TeX:UTF-8"

\chapter{网络可生存性的基本原理}
为了增强网络性能、保证网络的健壮性，需要对网络中（本文以软件定义网络为研究背景）的许多问题进行优化设计，这些问题主要包括：网络可生存性设计问题，业务恢复问题等。随着SDN网络的兴起和网络业务在各个领域的广泛应用的爆炸性增长，网络可生存性问题已成为SDN网络关注的焦点。目前业内提出了许多关键词，比如可靠性、抗毁性、鲁棒性和可信赖性等，它们的本质都是以网络可生存性的研究为出发点。在本章中我们主要就网络可生存性问题展开讨论。



\section{网络的可生存性概述}
软件定义网络中控制层中心控制器管理每条信道，而当某条信道发生故障时，则必须在短时间内恢复。因此在软件定义网络网络控制层路由方面，研究路由的可生存性变得尤为重要。

关于网络可生存性(survivability)具体定义有多种说法\cite{al2009comparative}。Neumann\cite{hollway1993survivable}等人正式提出网络系统可生存性定义：在任意的不利条件下，基于计算机通信系统的应用应具有持续满足用户需求的能力，其中用户需求包含安全性、可靠性、实时响应和正确性等需求；Ellison\cite{ellison1997survivable}等人进一步完善了网络系统可生存性的定义：网络系统在遭受攻击、故障和意外事故的情况下及时完成任务的能力，属于网络完整性的一部分。


可生存性是与安全性相关的一个重要属性, 它反映了网络系统面临入侵和攻击等安全破坏威胁时仍能恢复正常服务的能力\cite{jha2000survivability}。 关于可生存性的研究最早开始于军事领域\cite{frank1974survivability}。 随着安全破坏发生频度的逐渐增多, 可生存性越来越多地引起人们兴趣和关注。 网络系统的可生存性的量化分析和验证是一个重要的基础工作。


可生存性反映了网络的整体性能, 是网络研究的一个基本目标。 现今的网络环境下, 造成服务失效的原因很多, 例如, 系统运行过程中出现的软硬件故障、自然因素或者恶意攻击或破坏。 可生存性分析需要分析失效的现象, 剖析影响可生存性的本质特征,建立可量化的评价模型。 针对不同的网路环境和不同的评价原则人们给出了各种可生存性的定义\cite{zolfaghari1994framework,liew1994framework,knight2000definition} 。 人们使用各种方法来分析网络的可生存性, 其中大部分是基于随机模型和图论。 网络可生存性的分析要建立在攻击模型的基础上。目前, 这部分的研究工作仍然是针对局部网络展开, 还没有形成系统的实现机制和评价方法。 文献\cite{frank1974survivability} 利用模型检测技术生成系统的情景图(scenario graph)，并且对网络系统建立网络流图模型, 利用最大流最小割算法得到了确定可生存性的评价指标。


考虑到今天通信系统和基础设施的重要性，网络应该在设计和操作上考虑到系统或者设施出现故障能够被解决。例如，由于恶意攻击，自然灾害，突然间的电缆断裂，计划维修，设备故障等等，网络节点/链接可能出现故障。弹性，容错性，可生存性，可靠性，鲁棒性和可信赖性，是已经被使用的不同术语。这些术语是面对网络故障时网络维护运行保持通信能力的术语。如作者\cite{al2009comparative}所指,不同的术语有重叠的意思和一定的歧义。在本文中，我们将使用\textbf{可生存性}网络一词是指\textbf{在网络中当一个网络组件出现故障，可以通过找到替代路径来避免出现故障的网络组件}。

随着人们对可生存性技术的关注，国内外的许多研究机构都对其投了大量的人力、物 力，其研究重点可概括为可生存性的基本概念\cite{kuipers2012overview}、可生存性体系结构和系统模型\cite{luxinhua2006}、 系统分析与设计、系统工程方法和工具、可生存性风险评估\cite{linxuegang2006} 等。


就国内目前的研究来看，网络可生存性设计主要基于两种模式\cite{hanjianjun2007}，即基于入侵使用情景的重新设计方法（被动式）和基于入侵容忍技术的生存系统设计方法（主动式）。简单来说，第一种模式是在故障产 生后对系统模型的重新开发，目前还处于研究阶段；而第二种模式采用了容忍入侵的策略，它具有高效的监测系统，一旦发现故障，便调用冗余资源进行系统异常修补。第二种模式 的代价较第一种模式要高一些，并且现阶段的研究还不是很成熟，目前比较经典的是基于 入侵检测技术的设计模式，它通过对网络故障的快速检测、定位和恢复使其可靠性可生存性提高。

现阶段，网络可生存性研究已经得到了很大重视，很多知名学者就该问题的不同方面作了深入研究，问题涉及故障分类、可生存性建模分析、故障恢复技术、可生存性网络规划 等许多子领域，并取得了一些成果。其中主要的三种方法是能使网络获得高可生存性能力。
\begin{enumerate}
\item 网络连通，即可生存性好的网络应该是具有图论中高连通性的。
\item 网络增强，即可能需要新的链路/节点以增加网络的连通性。
\item 路径保护，即寻找替代方案的过程，失效故障时的替代路径。
\end{enumerate}


现实网络中网络故障是不可避免的，因此必须加强网络可生存性研究，可以采取对网络故障进行快速的检测、定位和恢复的方式，以保证网络的可生存性。
\subsection{网络连通}
网络通常被表示为图$G=(\mathbb{\mathbb{V}},\mathbb{\mathbb{E}})$，其中$\mathbb{\mathbb{V}}$是$|\mathbb{\mathbb{V}}|$个节点的集合（例如表示路由器），$\mathbb{\mathbb{E}}$是$|\mathbb{\mathbb{E}}|$条链路的集合（例如表示光纤线路或无线电信道）。链路可以用它们的容量、延迟、长度、成本和/或失效概率的权重为特征。如果图中的每对节点之间存在路径则图是连通(connected)，否则该图被称为非连通。在可生存性的含义中，连通性的概念可以进一步拓展为$k$-连通($k$-connected)，其中在每对节点之间存在至少k 条不相交路径。根据这些路径是节点不相交还是链路不相交，我们区分为节点连通性和链路连通性。图$G$的边连通度$\lambda(G)$ 是删除G的最小边数使得图边不连通。相应地，图的节点连通性$\kappa(G)$是删除G的最小节点数使得图节点不连通。

\subsection{网络增强}
测试出网络的连通度的结果显示出网络可能是不是够健壮(连通)。重新布线(覆盖)网络可以提高其健壮性\cite{van2010influence}。因此通常通过向网络添加新的链路和可能的节点来提高网络的性能或网络的健壮性。添加链路或节点可能代价很高(这能通过链路/节点权重来反映)，因此新的链路/节点应该被明智地放置，以便以最少的链路/节点数量获得所需的网络属性，或者添加固定数量的链接/节点使所需的网络属性最大化。这类问题被称为(网络)增强(network augment) 问题，然而在这类问题中，问题仅在其目标上有所不同。例如，$k$- 连通性是网络健壮性的一个重要属性，通过添加链路来达到$k$- 连通性就是这样的目标之一。代数连通性增强是一个NP-hard问题\cite{mosk2008maximum}。 类似地，添加最小数量的链路使一个图是弦（chordal）也是NP-hard\cite{yannakakis1981computing}(如果一个图的四个或更多个节点之间都有一条边相连则称这个图为弦)。
\subsection{路径保护}
在Internet上部署诸如OSPF这样的网络协议，以获得正确的拓扑视图，并在发生变化(如链路故障)时，将路由收敛到新的(不受干扰的)情况。但是这个过程并不快，应用程序在性能上可能仍然面临不可接受的干扰。结合MPLS技术，可以使用MPLS快速重路由机制，它提供了从失效的主路径在亚秒时间切换到备份路径的能力。这个快速重路由机制在RFC 4090\cite{pan2005fast}，其被提出并且已经被几个供应商实现了。这一概念也已扩展到纯IP 网络，并被称为IP 快速重路由\cite{shand2010ip}。RFC 4090 定义了RSVP-TE扩展来建立备份标签交换路径(LSP)隧道，用于对LSP隧道进行本地修复。备份路径可以为防止链接或节点故障而配置。由于备份路径是预先计算的，所以在计算备份路径或在发生故障时执行信令时不会浪费时间。因此，迫切需要有效的算法来计算不相交的路径。根据备份路径是在主路径失效之前还是之后计算，可生存性技术可以广泛地分为恢复技术或保护技术。

\section{网络可生存性指标}
本文在进行网络可生存性设计时，要达到的最理想的状态是：对于给定的网络拓扑结构, 能够在最短的时间内使故障元素获得最大程度的恢复，并同时保证最大的资源利用率。然而由于事件的互斥性，很难同时实现所有这些要求，所以需要根据不同的业务或用户需求 以及网络本身的特点，采取相应地措施，从而满足网络的可生存性指标要求。

常用的网络可生存性指标主要有:
\begin{itemize}
  \item 故障恢复时间：是指从网络故障发生时，到业务恢复正常传输所需的时间。该 项指标最直接，也最能体现网络的可生存性能力。众所周知，对于网络用户来说，传输过程 是透明的，他们所能感受到的就是网络提供的业务服务质量，而其中最敏感的因素便是故 障恢复时间。
  \item 业务请求拒绝率：是指被拒绝的网络业务数与总体业务请求数量的比率。可生存性网络研究的目标是最小化请求拒绝率。
  \item 平均网络负载：网络负载是指网络链路中的流量负荷，一且链路负荷过重，将直 接影响整体网络的迕通性。因此，最小化网络负载将有利于网络可生存性的研究。
  \item 业务平均跳数：某些网络有时以步长来衡量代价耗费，因此最小化路径长度是网 络优化指标之一。
  \item 网络资源利用率：这是衡量任何一个网络优劣的可靠指标，提高网络利用率是网络运营商追求利益的根本。
  \item 鲁棒性：即健壮性或者可生存性，是指经历过一次网络故障后，网络再次承受故障的能力。它主要用来衡量网络业务的可持续性。
\end{itemize}
其中，网络资源利用率、业务请求拒绝率和平均网络负载是几个最常用的评价指标。


\section{网络故障分类}
由于遭受破坏的因素及网络元素不同，网络故障也是多种多样，按照光网络中故障的 表现方式不同可分为软故障和硬故障；按照故障产生的元素不同可分为信道故障、节点故障和链路故障。概念解释如下：

所谓硬故障是指某些意想不到的突发事件致使传输信道中断的事件，如地震、光纤断 裂、收发元器件失效等；软故障是指传输过程中由于信号逐步衰减，而造成信息丢失的事 件，如光纤损耗増大等。

不难看出，硬故障对网络业务影响较大，但处理方便；软故障对网络业务的影响比较小，但出现机率较高，不容易被发现，并且难以对故障精确定位。

因而，从科研角度出发，网络中的故障按位置区分更利于研究：
\begin{itemize}
\item 信道故障是由于该信道对应的特定激光器或接收器出故障引起。
\item 链路故障主要是由于光纤断裂引起。
\item 节点故障主要是由于断电或是地震等灾难性情况引起。
\end{itemize}



\section{网络故障处理}
网络的可生存性实现机制根据是否预留备用资源和是否进行重路由计算，通常把故障处 理策略分为保护(protection，主动式) 和恢复(restoration，被动式)两种\ cite{kvalbein2009multiple}。保护措施和恢复措施均是在 网络故障情况下，使受损的业务得以重新运行。原理上，两者均利用重路由方式（重新选 择新的路由来代替故障路由），继续故障业务数据传输。就具体实施方案而言，保护和恢 复方法又有所不同。两种方案各有利利弊，恢复机制能够提高网络资源的利用效率；保护机制可提供更快的恢复时间，有利于网络QoS的保障。

网络恢复策略在网络故障后动态自适应地进行全网资源重分配，但路由重新收敛花费较多的时间而不可接受。因此目前故障快速恢复研究以网络保护策略为主，通过提前对网络进行资源规划和预留，使得故障时能迅速切换，如基于多拓扑\cite{shand2010ip}和基于备份路径的故障恢复技术。多拓扑技术需要配置多个拓扑子层，路由存储消耗大；基于备份路径的故障恢复技术提供端到端路径重路由，在全局范围内进行流量分配，易于基于现有协议实现。因此，备份路径技术是当前故障恢复领域研究的热点\cite{yang2014keep,suchara2011network,banner2010designing}。下面我们将做详细区分。

所谓保护方案是指，事先为业务分配好预留的保护资源即备份资源，主要利用节点 之间预留的备用资源来实现网络保护。当故障发生时，业务可以由事先预留的保护资源承 载，即将工作通路上的通信信号倒换到备用通路上，使工作信号通过预留的保护通路维持 业务正常传输；而恢复方案指，并不事先为业务分配预留的保护资源，在检测到故障时， 动态地从网络中寻找替代的路由，来承载受故障影响的业务。如果此时找不到合适的路由，那么，该工作路径上携带的业务就会丢失。

两种方案对比如下：
\begin{itemize}
  \item 由于保护机制是事先对特定的故障做了假设，进而预留了备份资源。它能够确保 对于预料之中的故障（如单链路失效〉业务的恢复，而对于些未知故障（如多链路同时 失效），则不能确保其恢复能力。
恢复机制是在发生故障后实时、动态地寻找可用资源，这种方式灵活性较强，可以针 对多种失效情况进行恢复，特别是对于多链路同时失效下的恢复。但由于事先没有预留备 份资源，因此在很多情况下，网络的资源状况不能确定，也就无法确保及时恢复。
  \item 保护机制是在牺牲资源利用率的前提下实施的，因而可以较快的实现业务恢复；恢复机制是动态地根据当前网络状态重路由，从而可以实现较高的资源利用率，但业务恢复 时间较长。
\end{itemize}
由上面的阐述可见，保护和恢复方案两者不存在互斥现象，因此，我们在进行网络的 可生存性设计时，往往会考虑将保护和恢复方案折中的办法，取两种方案中的优点合并，从 而为客户提供多种服务级别，尽可能做到在恢复时间、运行保障与效率及成本之间取得平 衡。同时保证故障情况下，时效性和网络资源的合理化利用，即保证在一定的约束下为工 作通路预先选择好保护通路。这就相当于以网络可生存性为约束条件的资源优化的问题。

一般而言，运营商根据不同的服务标准，对不同业务选择不同的方案，选择依据如下：
\begin{itemize}
  \item 对于重要的业务，如金融业，一般采取保护的方案。
  \item 对于一些特殊的拓扑，如链形、环形或环网相交等可以采用保护方案。
  \item 对于网络拓扑连通性强，且对网络的资源利用率要求较高的一些网络，则可以选
用合适的恢复方案。
\end{itemize}

由于现实中网络资源的不足，在实际的网络操作中，通常以保护机制为基础，來保 障一些可预料的故障，（如光缆断裂等公共失效故障〉，然后，再使用恢复机制进行加强，保障整网范围内的故障或失效。根据不同要求的业务可以选择不同类型的方法以保证其生存 性，例如对于实时业务，可以使用链路/节点保护，即预先建立保护通道和预留资源的保护 方式；而对于“尽力而为”的业务，就可以按需建立保护通道，或者依靠高层的恢复机制。 与恢复机制相比，保护机制具有更高的可靠性和更快速的恢复能力，这更适用于具有巨大 传输容量的光网络，因此本文主要研究的是保护机制。
\section{网络保护策略}
随着技术的发展，网络所承载的信息流量显著增加，特别是在主干网中，网络中设备 接口速率达到2.5Gb/s 以上，即使仅持续几秒的短暂性故障也会造成大量的数据丢失。 因此，为故障的业务寻找新的传输路由，并使其在尽可能短的时间内自愈变得越来越重要。 目前，许多文献对于网络故障处理方案进行了大量的研究，根据不同的功能或方式总结如下:
\begin{itemize}
  \item 从重路由的角度分为：基于路径保护、基于链路的保护及区段保护。
  \item 根据备用资源的预留方式可分为：专用保护和共享保护。
  \item 按照路由的计算方式可分为：预计算和实时计算。
\end{itemize}
\subsection{路径保护}
所谓通道(路径)保护是指业务故障恢复由通道两端的终端节点来完成。具体来说，基于通道的保护机制是指对工作路由事先预留一条备用保护路由，在故障发生后，用预留的保护通道来传输故障通道中的业务流，从而取代故障通道，实现业务重路由。在通道保 护方案中，每条路径在建立时就己经预设了一条端到端的备用通道并预留了备用资源。一旦网络中发生故障，受到影响的通道源/ 目的节点间的业务流将自动由工作通道切换 到这两个节点间的另一条与故障通道链路不相交的备用通道上来，从而保证业务恢复。即 当发生故障时，其切换过程只涉及源、目的节点，与中间节点无关，由于是源节点和目的 节点启动保护倒换，因而对故障的具体定位要求不高，但信令协议必须快速准确的将故障 消息传送至源、目的节点。

通道保护又可分为专用通道保护（备用资源为某条工作通道专用）和共享通道保护（备用资源能同时为多条工作通道提供保护）。专用保护通常是指1+1通路保护和1: 1通路保护。共享保护是指1: N保护方式。
\subsection{链路保护}
基于链路的故障保护方案，是指业务请求经过的每一条链路，都有一条保护路径对其 进行保护，一旦链路出现故障，业务将越过故障点，直接转到保护路径上。它是通过处理 与故障点相邻的节点来实现对业务的恢复的，是将受故障影响的业务流绕过故障链路来进行重路由。即在与故障点邻接的两点间，为该故障链路寻找一条可绕过该故障点的备用路由。显然，该保护方案中，参与保护切换的节点数较少，因而具有较强的本地性，恢复 速度较快。同时由于它的本地性，也使得资源浪费过多，从而，无法有效的利用资源。
在该方案中，对于不同链路中的业务，只要不同时发生故障，就可以共享相同的保护 路径，因此也可以分为专用链路保护和共享链路保护两种。前者是指对于某一链路，提 供专门的保护路径，其他链路则不得使用该专用路径；而后者允许不同的链路保护路径在 其重叠的部分实现共享。比较而言，后者比前者资源利用率要高，而前者较后者的保护力 度大。
\subsection{区段保护}
区段保护是折中了通路保护和链路保护各自的特点而得到的一种中庸的保护方式。区 段保护是指在一对节点之间出现光纤断裂故障时，则该段链路中的业务被倒换到这两个节点之间的另一根光纤中。如果两个相邻节点之间的一根光纤发生断裂，则类似于链路保护。
\section{本章小结}
网络可生存性设计的目的是提高网络的健壮性，由于网络故障不可避免，那么故障后的 及时修复成为网络性能的一个重要方面。本章给出了故障业务恢复方法的综述，比较得出共享保护方案优于专用保护方案，同时通道保护方案优于链路保护方案，由此提出，一般 共享通道保护方案的性能较高。



%在满足delay 约束的同时达到两条路径总的
%花费(cost)最小。当给定的delay 约束针对两条路径的端到端延时总和时,问题被称为DCLDOP-I(delay
%constrained link disjoint optimal paths),当给定的delay 约束针对路径对中每条路径的端到端延时时,问题被称为
%DCLDOP-II。文献[Researches on the problem of link disjoint paths with QoS constraints]对DCLDOP-I 和DCLDOP-II 问题进行了建模,证明了这两种问题同属于NP 完全问题。文献
%[4]针对DCLDOP-I 问题提出了两种近似求解算法。文献[Constrained shortest link-disjoint paths selection: A network programming based approach]研究了总延时受限下的k 条cost 最小链路分离路径
%问题。文献[On the complexity of and algorithms for finding the shortest path with a disjoint] 提出了Min-Min 问题,旨在求解两条满足QoS 约束的分离路径且满足较短的路径cost 最小。文献[Link-Disjoint shortest-delay path-pair computation algorithms for shared mesh restoration networks]
%通过求解总延时最小的链路分离路径对来解决单链路失效后的路由恢复问题。
